
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>System Specification &#8212; OpenSCADA 1.0 documentation</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Resource Specification" href="resource_specification.html" />
    <link rel="prev" title="Creating a PLC" href="project_configuration.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>OpenSCADA 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>System Specification</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="project_configuration.html">Creating a PLC</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="resource_specification.html">Resource Specification</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="system-specification">
<h1>System Specification<a class="headerlink" href="#system-specification" title="Permalink to this headline">¶</a></h1>
<p>The system level specification of the PLC is specified as a prototxt file of the SystemConfiguration proto message format specified in <a class="reference external" href="https://github.com/Vignesh2208/OpenSCADA/tree/master/src/pc_emulator/proto/system_specification.proto/">system_spectification.proto</a> file. In this guide we will use an example of the proto definition given <a class="reference external" href="https://github.com/Vignesh2208/OpenSCADA/tree/master/examples/inverted_pendulum/system_specification.proto/txt">here</a>.</p>
<p><strong>configuration_name</strong>: A name given to identify this PLC. In this example it is Pendulum_PLC:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">configuration_name</span><span class="p">:</span> <span class="s2">&quot;Pendulum_PLC&quot;</span>
</pre></div>
</div>
<p><strong>log_level</strong>: Logging level. 5 types are supported: LOG_NONE, LOG_NOTICE, LOG_INFO, LOG_ERROR, LOG_VERBOSE.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log_level</span><span class="p">:</span> <span class="n">LOG_NOTICE</span>
</pre></div>
</div>
<p><strong>log_file_path</strong>: (optional) If specified the logs are stored here.</p>
<p><strong>run_time_secs</strong>: Total time for which the PLC should run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">run_time_secs</span><span class="p">:</span> <span class="mi">30</span>
</pre></div>
</div>
<p><strong>hardware_spec</strong>: Description about the PLC’s hardware according to HardwareSpecification message defined in <a class="reference external" href="https://github.com/Vignesh2208/OpenSCADA/tree/master/src/pc_emulator/proto/system_specification.proto/">system_spectification.proto</a>. (Full example is not included here for brevity). In this hardware_spec, num_resources specifies the number of CPUs attached to the PLC. Here it is 1. The hardware_spec also includes the mean and standard deviation of execution times of all instructions, system functions and system function blocks. The mean and standard deviation execution times are all specified in nanoseconds:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hardware_spec</span> <span class="p">{</span>
    <span class="n">num_resources</span><span class="p">:</span> <span class="mi">1</span>
    <span class="n">ram_mem_size_bytes</span><span class="p">:</span> <span class="mi">10000</span>

    <span class="c1"># Instruction mean, std execution times, used only in virtual time mode</span>
    <span class="n">ins_spec</span> <span class="p">{</span>
        <span class="n">ins_name</span><span class="p">:</span>   <span class="s2">&quot;ADD&quot;</span>
        <span class="n">mu_exec_time_ns</span><span class="p">:</span>    <span class="mi">1000</span>
        <span class="n">sigma_exec_time_ns</span><span class="p">:</span> <span class="mi">100</span>
    <span class="p">}</span>

    <span class="n">ins_spec</span> <span class="p">{</span>
        <span class="n">ins_name</span><span class="p">:</span>   <span class="s2">&quot;AND&quot;</span>
        <span class="n">mu_exec_time_ns</span><span class="p">:</span>    <span class="mi">1000</span>
        <span class="n">sigma_exec_time_ns</span><span class="p">:</span> <span class="mi">100</span>
    <span class="p">}</span>

    <span class="o">...</span>

    <span class="c1"># SFCs (System functions) - mean, std of execution times</span>
    <span class="n">sfc_spec</span> <span class="p">{</span>
        <span class="n">sfc_name</span><span class="p">:</span> <span class="s2">&quot;ABS&quot;</span>
        <span class="n">mu_exec_time_ns</span><span class="p">:</span> <span class="mi">2000</span>
        <span class="n">sigma_exec_time_ns</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>

    <span class="o">...</span>

    <span class="c1"># SFBs (System function blocks) - mean, std of execution times</span>
    <span class="n">sfb_spec</span> <span class="p">{</span>
        <span class="n">sfb_name</span><span class="p">:</span> <span class="s2">&quot;TON&quot;</span>
        <span class="n">mu_exec_time_ns</span><span class="p">:</span> <span class="mi">1500</span>
        <span class="n">sigma_exec_time_ns</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">}</span>

    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>datatype_declaration</strong>: Multiple datatypes can be declared in the system specification and later used inside PLC programs or function blocks. A datatype can belong to one of the categories belonging to DataTypeCategory enum defined in <a class="reference external" href="https://github.com/Vignesh2208/OpenSCADA/tree/master/src/pc_emulator/proto/configuration.proto/">configuration.proto</a>. Full explanation of the datatype_declaration message will be included in subsequent sections. In this example 4 datatypes are declared.</p>
<ul>
<li><p class="first">An integer typedef datatype called INT_TYPE_DEF. Any variable of this datatype will be an integer with an initial value of 10:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datatype_declaration</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;INT_TYPE_DEF&quot;</span>
    <span class="n">datatype_category</span><span class="p">:</span> <span class="n">INT</span>
    <span class="n">datatype_spec</span> <span class="p">{</span>
        <span class="n">initial_value</span><span class="p">:</span> <span class="s2">&quot;10&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">A 1-D integer array datatype called INT_1DARR_TYPE_DEF. Any variable of this data type will be a 10 dimensional array initialized to [-1,0,1,2,3,4,5,6,7,8]:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datatype_declaration</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;INT_1DARR_TYPE_DEF&quot;</span>
    <span class="n">datatype_category</span><span class="p">:</span> <span class="n">INT</span>
    <span class="n">datatype_spec</span> <span class="p">{</span>
        <span class="n">initial_value</span><span class="p">:</span> <span class="s2">&quot;{-1,0,1,2,3,4,5,6,7,8}&quot;</span>
        <span class="n">dimension_1</span><span class="p">:</span>  <span class="mi">10</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">A 2-D integer array datatype called INT_2DARR_TYPE_DEF. Any variable of this data type will be a 2 x 2 matrix initialized to [[0,1],[2,3]]:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datatype_declaration</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;INT_2DARR_TYPE_DEF&quot;</span>
    <span class="n">datatype_category</span><span class="p">:</span> <span class="n">INT</span>
    <span class="n">datatype_spec</span> <span class="p">{</span>
        <span class="n">initial_value</span><span class="p">:</span> <span class="s2">&quot;{{0,1},{2,3}}&quot;</span>
        <span class="n">dimension_1</span><span class="p">:</span>  <span class="mi">2</span>
        <span class="n">dimension_2</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">A complex structure datatype called COMPLEX_STRUCT. It has multiple fields and each field is specified with the datatype name of the field. This could inturn be an elementary/inbuilt datatype or a complex datatype. The list of inbuilt elementary datatypes are described in the IL programming section. In this example the structure has 5 fields with three of them using the 3 previously declared datatypes we just looked at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">datatype_declaration</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;COMPLEX_STRUCT&quot;</span>
    <span class="n">datatype_category</span><span class="p">:</span> <span class="n">DERIVED</span>
    <span class="n">datatype_field</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="s2">&quot;string_field&quot;</span>
        <span class="c1"># String is an elementary datatype. It is a char array of size 1000</span>
        <span class="n">field_datatype_name</span><span class="p">:</span> <span class="s2">&quot;STRING&quot;</span>
    <span class="p">}</span>
    <span class="n">datatype_field</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="s2">&quot;int_field&quot;</span>
        <span class="n">field_datatype_name</span><span class="p">:</span> <span class="s2">&quot;INT_TYPE_DEF&quot;</span>
    <span class="p">}</span>
    <span class="n">datatype_field</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="s2">&quot;real_field&quot;</span>
        <span class="c1"># Real is an elementary datatype. It is equivalent to float.</span>
        <span class="n">field_datatype_name</span><span class="p">:</span> <span class="s2">&quot;REAL&quot;</span>
        <span class="n">initial_value</span><span class="p">:</span> <span class="s2">&quot;0.1&quot;</span>
    <span class="p">}</span>
    <span class="n">datatype_field</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="s2">&quot;oned_arr_field&quot;</span>
        <span class="n">field_datatype_name</span><span class="p">:</span> <span class="s2">&quot;INT_1DARR_TYPE_DEF&quot;</span>
    <span class="p">}</span>
    <span class="n">datatype_field</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="s2">&quot;twod_arr_field&quot;</span>
        <span class="n">field_datatype_name</span><span class="p">:</span> <span class="s2">&quot;INT_2DARR_TYPE_DEF&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>var_global</strong>: Variables which can be used by all programs running on this PLC can be declared in the system specification. All PLC level global variables are declared in the var_global section. Variable declaration is similar to datatype declaration with an optional interface_type and storage_specification. Interface types assign meaning to the way the variable is interpreted by the PLC program. For instance a variable of interface_type VAR_INPUT is equivalent to an INPUT variable defined in IEC 61131-3 specification. A variable declared inside the var_global section can only optionally have VAR_EXPLICIT_STORAGE interface type.</p>
<p>Storage specifications denote where the variable is stored, i.e whether the address of the variable is backed by RAM/IO memory. They can only be present if the interface type is VAR_EXPLICIT_STORAGE, otherwise the variable is allocated statically and does not point to any byte in the PLC’s RAM or IO memory. Further explation of variable interface_types and storage_specifications are described in the IL programming section.</p>
<p>In this example, 4 PLC level global variables are declared:</p>
<ul>
<li><p class="first">“global_bool_var” is a boolean whose value is stored in RAM byte number 3 and bit number 1 within the byte.</p>
</li>
<li><p class="first">“global_int_var” is an integer variable which is stored in RAM starting at byte number 4.</p>
</li>
<li><p class="first">“start_int” is of type INT_TYPE_DEF declared before but it is statically and its memory location is not addressible.</p>
</li>
<li><p class="first">“complex_global” is a global variable of type COMPLEX_STRUCT and is stored in RAM memory starting at byte 30:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">var_global</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;__CONFIG_GLOBAL__&quot;</span>
    <span class="n">datatype_field</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="s2">&quot;global_bool_var&quot;</span>
        <span class="n">field_datatype_name</span><span class="p">:</span> <span class="s2">&quot;BOOL&quot;</span>
        <span class="n">intf_type</span> <span class="p">:</span> <span class="n">VAR_EXPLICIT_STORAGE</span>
        <span class="n">field_storage_spec</span> <span class="p">{</span>
            <span class="n">mem_type</span><span class="p">:</span> <span class="n">RAM_MEM</span>
            <span class="n">byte_offset</span><span class="p">:</span> <span class="mi">3</span>
            <span class="n">bit_offset</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">datatype_field</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="s2">&quot;global_int_var&quot;</span>
        <span class="n">field_datatype_name</span><span class="p">:</span> <span class="s2">&quot;INT&quot;</span>
        <span class="n">intf_type</span> <span class="p">:</span> <span class="n">VAR_EXPLICIT_STORAGE</span>
        <span class="n">field_storage_spec</span> <span class="p">{</span>
            <span class="n">full_storage_spec</span><span class="p">:</span> <span class="s2">&quot;%MW4&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">datatype_field</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="s2">&quot;start_int&quot;</span>
        <span class="n">field_datatype_name</span><span class="p">:</span> <span class="s2">&quot;INT_TYPE_DEF&quot;</span>
    <span class="p">}</span>
    <span class="n">datatype_field</span> <span class="p">{</span>
        <span class="n">field_name</span><span class="p">:</span> <span class="s2">&quot;complex_global&quot;</span>
        <span class="n">field_datatype_name</span><span class="p">:</span> <span class="s2">&quot;COMPLEX_STRUCT&quot;</span>
        <span class="n">intf_type</span><span class="p">:</span> <span class="n">VAR_EXPLICIT_STORAGE</span>
        <span class="n">field_storage_spec</span> <span class="p">{</span>
            <span class="n">full_storage_spec</span><span class="p">:</span> <span class="s2">&quot;%MW30&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>resource_file_path</strong>: Indicates where to find specification this PLC first and only CPU. Since the PLC can have multiple CPUs, this field can be repeated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">resource_file_path</span><span class="p">:</span> <span class="s2">&quot;/home/moses/OpenSCADA/examples/inverted_pendulum/CPU_001.prototxt&quot;</span>
</pre></div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="project_configuration.html">Creating a PLC</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="resource_specification.html">Resource Specification</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Vignesh Babu.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>