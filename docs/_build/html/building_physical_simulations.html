
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Simulating Physical Systems &#8212; OpenSCADA 1.0 documentation</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Kronos driven co-simulation" href="co_simulation.html" />
    <link rel="prev" title="PLC Communication" href="plc_communication.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>OpenSCADA 1.0 documentation</span></a></h1>
        <h2 class="heading"><span>Simulating Physical Systems</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="plc_communication.html">PLC Communication</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="co_simulation.html">Kronos driven co-simulation</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="simulating-physical-systems">
<h1>Simulating Physical Systems<a class="headerlink" href="#simulating-physical-systems" title="Permalink to this headline">¶</a></h1>
<p>OpenSCADA PLCs can communicate with simulations of physical systems or processes. To interact with PLCs, a proxy Sensor/Actuator driver can be built using the GRPC API already discussed in the Section PLC I/O.</p>
<p>An abstract python class called PhysicalSystemSim is defined in <a class="reference external" href="https://github.com/Vignesh2208/OpenSCADA/tree/master/contrib/physical_system_sim.py">physical_system_sim.py</a> and every physical system simulation must implement an object derived from this class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PhysicalSystemSim</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Generic Physical system simulation abstract class.</span>

<span class="sd">    Any physical system simulator which needs to interact with OpenSCADA PLCs</span>
<span class="sd">    needs to implement this Class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">ABCMeta</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timestep_secs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method is called internally to advance the simulation by a step size.</span>

<span class="sd">        The OpenSCADA emulation_driver.py invokes this function. A physical system</span>
<span class="sd">        simulator should implement the logic to advance its simulation by</span>
<span class="sd">        timestep_secs. During this progress, it may set sensor input&#39;s of PLCs</span>
<span class="sd">        and get Actuator outputs from PLC&#39;s and act accordingly.</span>

<span class="sd">        Args:</span>
<span class="sd">            timestep_secs (float): Timestep to advance in secs.</span>
<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        Raises:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>A specific implementation of a physical system simulation must inherit from this abstract class and register itself with an object of type EmulationDriver which is a built-in class defined inside <a class="reference external" href="https://github.com/Vignesh2208/OpenSCADA/tree/master/contrib/emulation_driver.py">emulation_driver.py</a>. The <strong>progress</strong> method needs to be implemented by the inherited object. It is called implicitly by the emulation_driver and when upon each call, the logic embedded in the physical system simulation should be advance the simulation for the specified duration in seconds and pause it. During this progress, the logic may set sensor input’s of PLCs and get Actuator outputs from PLCs.</p>
<p>An example pendulum simulator is included with the installation for reference. It is implemented in <a class="reference external" href="https://github.com/Vignesh2208/OpenSCADA/tree/master/examples/iverted_pendulum/pendulum_sim.py">pendulum_sim.py</a> file located inside examples/inverted_pendulum. This example implements a cart pole which can move left or right inresponse to an applied force. A PLC reads the current angle of the pendulum and applies force on the cart to move it left or right so that the pendulum stays upright.</p>
<p>The pendulum simulator implements the <strong>progress</strong> method. Inside this method, it gets the actuator output (which is force applied on the cart) and applies it in the simulation. It then sets the current pendulum angle as a sensor input to the PLC. It uses the GRPC API described in Section PLC I/O to interact with the attached PLC.</p>
<p>In the next section, we build on this discussion and show how to use the built-in EmulationDriver class to configure and run time synchronized OpenSCADA PLCs and physical system simulations.</p>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="plc_communication.html">PLC Communication</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="co_simulation.html">Kronos driven co-simulation</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Vignesh Babu.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>